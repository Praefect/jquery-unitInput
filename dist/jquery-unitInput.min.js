/*! jQuery Unitinput - v0.1.0 - 2013-07-23
* https://github.com/amazingSurge/jquery-unitInput
* Copyright (c) 2013 amazingSurge; Licensed GPL */
(function(t){var e=t.unitInput=function(s,i){this.element=s,this.$element=t(s),this.options=t.extend({},e.defaults,i),this.namespace=this.options.namespace,this.status=this.options.status,this.value=this.options.value,this.opened=!1,this.init()};e.prototype={constructor:e,init:function(){var e=this,s=t('<div class="'+this.options.skin+" "+this.namespace+'-unit"><select></select><div class="'+this.namespace+'-bar"></div><ul class="'+this.namespace+'-list"></ul></div>');this.$tpl=s,this.$select=s.find("select"),this.$ul=s.find("ul"),this.$bar=s.find("."+this.namespace+"-bar"),t.each(this.status,function(s,i){var n=t("<li>"+i+"</li>").data("value",s),a=t('<option value="'+s+'">'+i+"</option>");e.value===s&&(a.prop("selected",!0),n.addClass(e.namespace+"-active")),a.appendTo(e.$select),n.appendTo(e.$ul)}),this.$li=this.$ul.find("li"),this.$options=this.$select.find("option"),this.$element.addClass(this.namespace+"-input "+this.options.skin),this.$select.css({display:"none"}),this.$ul.css({display:"none"}),this.$element.after(s),this.$bar.on("click",function(){return e.position.call(e),e.opened===!0?e.hide.call(e):e.show.call(e),!1}),this.$ul.delegate("li","click",function(){var s=t(this).data("value");return e.set.call(e,s),!1}),this.set(this.value)},position:function(){var e,s=this.$bar.outerHeight(!0),i=this.$bar.offset(),n=this.$ul.height();e=n+i.top>t(window).height()+t(window).scrollTop()?-n:s,this.$ul.css({position:"absolute",top:e,left:0})},show:function(){return this.enabled!==!1?(this.$ul.css({display:"block"}),t(document).on("click.select",t.proxy(this.hide,this)),this.opened=!0,this):void 0},hide:function(){return this.$ul.css({display:"none"}),t(document).off("click.select"),this.opened=!1,this},set:function(e){var s=this;this.$li.removeClass(this.namespace+"-active"),this.value=e,t.each(this.$options,function(s,i){t(i).attr("value")===e&&t(i).prop("selected",!0)}),t.each(this.$li,function(i,n){t(n).data("value")===e&&(t(n).addClass(s.namespace+"-active"),s.$bar.text(t(n).text()),t.isFunction(s.options.onChange)&&s.options.onChange(s),s.$select.trigger("change",s))}),this.hide()},get:function(){return this.$element.val()+this.value},enable:function(){return this.enabled=!0,this.$element.addClass(this.namespace+"-enabled"),this.$tpl.addClass(this.namespace+"-enabled"),this},disable:function(){return this.enabled=!1,this.$element.removeClass(this.namespace+"-enabled"),this.$tpl.removeClass(this.namespace+"-enabled"),this},destroy:function(){}},e.defaults={namespace:"unitInput",skin:"simple",status:{px:"px",em:"em",rem:"rem"},value:"px"},t.fn.unitInput=function(s){if("string"==typeof s){var i=s,n=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var e=t.data(this,"unitInput");"function"==typeof e[i]&&e[i].apply(e,n)})}return this.each(function(){t.data(this,"unitInput")||t.data(this,"unitInput",new e(this,s))})}})(jQuery);